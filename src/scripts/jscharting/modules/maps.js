'use strict';(function(f){function na(b,a){function c(){this.constructor=b}oa(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}function pa(b,a,c){var d=b.series,h=d.indexer,e=d.chart.geoParser,g,k=d.chartArea.isZoomLive(),l=a.x,m=a.y,v=a.width,t=a.height,q=f.bboxLib.fromRect(a),H,B=d.getXYZTranslator(),G,u=function(a){a=B(a[0],a[1]);return[l+a[0]*v,m+a[1]*t]};b.xyzTranslator=u;h.indexKeys(["coordinates","bbox"],{},0);var n=d.userPoints,x=!1,z=function(a){return aa(a,function(a,
c){return u([a,c])})},p=function(a){return n[a].map||h.getValue("map",a)||h.getValue("mapData",a)};b.everVisibleCount=0;c=function(a,c){h.getValue("pos",a);H=d.getMapData();var l=c=void 0,m=!0,v=h.getValue("coordinates",a,g),t=v&&v.originalPath;if(H=H.features[0].id?f.jL.find(H.features,function(c){c=c.id;var d=n[a].mapDataId;return c&&d&&c.toLowerCase()===d.toLowerCase()})||p(a):d.userPoints[a].map)c=H.geometry.type,G=H.bbox,l=z(G),H.bbox&&f.jL.isDefined(H.bbox[0])||(l=f.undefVal),x=!0,l&&(x=f.bboxLib.intersect([q,
l]),!v||v.isVisible||x||(m=x||f.bboxLib.everVisible(q,v.shapeBounds,l)),v&&!v.everVisible&&m&&!k&&t&&(v.pathD=f.pathLib.translate(t,v.translator).toString()));var B=void 0;if(m)if(t)B=f.pathLib.translate(t,u);else{B=n[a];var w=p(a)||H;if(t=e.toPath(w)){var F=function(a){return a.getMapData?a.getMapData():a.mapData||a.map}(B),L=F.bbox||f.jL.evalPath(F,"properties.bbox");F=f.jL.evalPath(F,"properties.cent")||[L[0]+L[2]/2,L[1]+L[3]/2];F=u(F);B.plotX=F[0];B.plotY=F[1];B.tooltipPos=F}c=c||f.jL.evalPath(w,
"geometry.type");B=f.pathLib.translate(t,u);!l&&(l=B.bbox())&&(x=f.bboxLib.intersect([q,l]))}else B=v.pathObj;m&&b.everVisibleCount++;v&&delete v.prev;g={meta:{},styleSet:v&&k?v.styleSet:d.getPointAttr(d.userPoints[a]),pathObj:B,isVisible:x,prev:v,originalPath:t,shapeBounds:l,translator:u,everVisible:m,fitBoxData:v?v.fitBoxData:f.undefVal};l&&(g.xyz=f.bboxLib.center(l));if(!k&&x&&("Polygon"===c||"MultiPolygon"===c)){b.altPossibleLabelPos=f.undefVal;var ba=x?B:f.undefVal;g.hitTest=function(a,c){return ba&&
ba.hitTest(a,c)}}g.meta.bodyD=g.pathObj;h.setValue("coordinates",a,g)};for(var w=0,L=n.length;w<L;w++)c(w,L);f.jL.evalPath(H,"properties.cent");b.coordRect=a;b.validate(!0);b.renderOrder=h.sortByNone();b.renderOrderRev=b.renderOrder.slice(0);b.renderOrderRev.reverse()}function ca(b,a){var c=a.id,d=a.bbox,h=null==a.properties?{}:a.properties;b=qa(b,a);return null==c&&null==d?{type:"Feature",properties:h,geometry:b}:null==d?{type:"Feature",id:c,properties:h,geometry:b}:{type:"Feature",id:c,bbox:d,properties:h,
geometry:b}}function qa(b,a){function c(a){return k(a)}function d(a){for(var c=[],d=0,b=a.length;d<b;++d){var e=a[d],h=c;h.length&&h.pop();for(var g=l[0>e?~e:e],f=0,m=g.length;f<m;++f)h.push(k(g[f],f));if(0>e)for(e=h,h=e.length,g=h-m;g<--h;)m=e[g],e[g++]=e[h],e[h]=m}2>c.length&&c.push(c[0]);return c}function h(a){for(a=d(a);4>a.length;)a.push(a[0]);return a}function e(a){return a.map(h)}function g(a){var b=a.type;switch(b){case "GeometryCollection":return{type:b,geometries:a.geometries.map(g)};case "Point":a=
k(a.coordinates);break;case "MultiPoint":a=a.coordinates.map(c);break;case "LineString":a=d(a.arcs);break;case "MultiLineString":a=a.arcs.map(d);break;case "Polygon":a=e(a.arcs);break;case "MultiPolygon":a=a.arcs.map(e);break;default:return null}return{type:b,coordinates:a}}var k=ra(b.transform),l=b.arcs;return g(a)}function da(b,a){var c=b.chart,d=c.internal.mappingInfo,h=c.geoParser.isSoloCountry(d);a=h||!b.projection.type&&a&&(360<=a[2]||180<=a[1]);var e,g=f.jL.isDefined(e=c.options("mapping.projection")),
k=a?!1:g?e:d.projection;!h&&g&&d.projection!==e&&(d.projection=k);d=b.zoomBBox||b.chart.geoParser.getDataBBox();h=b.getZoomAxes();b.projection=ea("none");if(h.length)if(k){var l="none"!==d;h=f.jL.isString(k)?k:k.type;g=k.point||f.jL.map(l?f.jL.map(f.bboxLib.center(d),E):[0,0],U);k=k.parallels||f.jL.map(l?f.jL.map([d[1]+.1*d[3],d[1]+.9*d[3]],E):[0,1],U);b.projection=ea(h,g,k)||W(g)}else b.projection=fa();a&&e&&"none"!==e.type&&c.error.addWarning(c.id,"The map is already projected.")}function sa(b){var a=
b.chartArea,c=a.chart,d=a.chart.internal.mappingInfo,h=b.getMapData();a.ctManager.isMapLayer(b)&&"object"===typeof h&&(c={data:c.options("dataSet"),binding:c.options("dataSetBinding"),points:b.userPoints,mode:"makePoints",series:b,cmi:d},a=a.chart.geoParser.parse(h,c),c=b.options("type"),c="marker"===a.type&&"bubble"===c?"bubble":"marker"===a.type?"marker":"map",h={points:a.points,map:{bbox:a.bbox,type:a.type,solo:h.solo}},c&&(h.type=c),b.options(h,!1),b.seriesDirty.pointIndex(!0),b.setData())}function ta(b,
a){var c=b.chart,d=[],h=[],e=[],g=[],k=[],l=c.options("mapping.base.layers"),m=c.options("mapping.referenceLayers"),v=c.options("mapping.base.series"),t=function(a){var c,e=function(a){return b.series().find(function(c){var d=a.mapDataId;return c.options("mapDataId")===d})};d.length!==a.length&&f.jL.each(a,function(a){e(a)||(b.addSeries(a),c=!0)});b.series().each(function(c){var d=c.options("map");f.jL.isString(d)&&!c.options("mapDataId")&&(d=f.jL.find(a,{map:d}),c.options(d,!1))});return c};b.series().each(function(a){a=
a.getConfig();d.push(a);switch(ua(a)){case "loaded":g.push(a);e.push(a);break;case "proto":e.push(a);k.push(a);break;case "config":h.push(a);k.push(a);break;case "none":e.push(a)}});var q=c.internal.mappingInfo;v={chartMappingInfo:q,contextSeries:v,existingSeries:e};v.series=h;var H=b.readyDefer.hold("mapLoad"),B=c.inited&&c.loading(!0);c.geoParser.loadMaps(l,m,v,function(d,e){d=t(e);k.length||d?c.geoParser.populateSeriesWhenAble(b._series,q,function(){b.series().each(sa);b.zoomBBoxMax=V(c);if("zoom"!==
b.chart.action.last()){var d=b.chart.geoParser.getDataBBox();d&&X(b,d);delete b.zoomBBox;delete b.zoomBBoxSet}c.isRendered&&(b.isDirtyPreRender=!0,X(b,b.chart.geoParser.getDataBBox()),f.jL.keys(b.readyDefer._onReady).length||!1===a||b.chartAreaSet.reflow());b.readyDefer.release(H);B&&c.loading(!1)}):(b.readyDefer.release(H),B&&c.loading(!1))},function(){b.readyDefer.release(H);B&&c.loading(!1)})}function va(b){var a=b.chart,c=a.uiItems?a.uiItems("zoom"):null,d=a.currentOptions.axisToZoom;if(!c&&""!==
d&&"none"!==d&&!1!==f.jL.evalPath(a.currentOptions,"toolbar.visible")){c={key:"zoom",label:{text:""},margin:10,boxVisible:!1,itemsBox:{boxVisible:!1,layout:"vertical",visible:!0},position:"brbr",stackDirection:"none",ignoreDefault:!0,items:{zoomIn:{y:.5,tooltip:"Zoom in",label:{text:"+"},events:{click:"zoom10In"},corners:["round","round","square","square"]},zoomOut:{label:{text:"-"},tooltip:"Zoom out",events:{click:"zoom10Out"},corners:["square","square","round","round"]}},defaultItem:{width:30,height:30,
label:{align:"center",style:{fontSize:"16px"}}},actions:{zoom10In:function(){b.chart.zoom("+80%")},zoom10Out:function(){b.chart.zoom("-80%")}}};d=a.toolbar();var h=f.jL.evalPath(d,"currentOptions.items.zoom");h&&!1===h.visible||!d.items||(d.items.add(h?f.jL.extend(c,h):c),a.chartAreaSet.reflow(f.undefVal,!1,!0))}}function wa(b,a,c){var d=b.chart,h=d.geoParser,e,g=[],k,l=f.jL.getValType(a);if("object"===l||"function"===l)if(d.series().each(function(c){k=c.points().filter(a);Array.prototype.push.apply(g,
k)}),g.length)a=h.getBBoxOfPoints(g);else return d.error.addWarning("The specified point filter did not match any points."),!1;else if("string"===l&&1<a.length&&isNaN(parseInt(a[1]))&&(e=h.findJsObjByMapCode(a))){if(e.zoomTo){e.zoomTo();return}a=h.getBBoxOfPoints(e)}ha(b,a,c);return!0}function ha(b,a,c){function d(a){var c=f.bboxLib.center(b.zoomBBox||v);m&&(a=Math.min(a,m));return h([c[0],c[1],a])}function h(a){var c=[a[0],a[1]],d=a[2];a=f.jL.clamp(t[2]/d,1,t[2]);d=f.jL.clamp(t[3]/d,1,t[3]);return f.bboxLib.snapInside(f.bboxLib.fromCenter(c,
[a,d]),t)}function e(a){var c;if("initial"===a)return V(g);v=b.zoomBBox||v;var e="+"===a[0]?1:"-"===a[0]?-1:0;(c=a.replace(/^\D+/g,"")).length&&(c=parseFloat(c)/100);if(0===e)return d(c);a=b.zoomBBoxMax[2]/v[2];return d(Math.max(a+a*c*e,1))}var g=b.chart,k=g.geoParser,l=f.jL.getValType(a);k=k.getDataBBox();var m=g.options("mapping.zoomLimit"),v=k.slice(0),t=b.zoomBBoxMax;if("number"===l)a=d(a);else if("string"===l)a=e(a);else if(4!==a.length)if(3===a.length)a=h(a);else if(2===a.length)a=f.bboxLib.snapInside(f.bboxLib.translate(b.zoomBBox||
v,a),t);else throw"Zooming config not supported.";l=b.zoomBBoxMax;!l||l[2]!==a[2]&&l[3]!==a[3]||(a=l);xa(b,a,c)}function V(b){return b.geoParser.getDefinedDataBBox(b.internal.mappingInfo)||b.geoParser.getDataBBox()}function X(b,a){b.zoomAxes.length||b.setZoomAxes();(b=b.zoomAxes).length&&(b[0].setDataRange([a[0],a[0]+a[2]]),b[1].setDataRange([a[1],a[1]+a[3]]))}function ia(b,a){b.zoomAxes.length||b.setZoomAxes();b=b.zoomAxes;b[0].zoom(a[0],a[0]+a[2],!1);b[1].zoom(a[1],a[1]+a[3],!1);b[0].setViewState();
b[1].setViewState()}function xa(b,a,c){ia(b,a);var d=b.chart;b.zoomBBox=a;b.chart.redraw(c);c=V(d);a=!!f.bboxLib.compareBoxes(a,c,3);b.chart.toolbar().zoomInOut(a)}function ja(b,a){var c=b.zoomBBox||b.chart.geoParser.getDataBBox();b.zoomBBoxSet=c;var d;if(d=c){d=c;c=b.chart;c.internal.mappingInfo.projection&&(d=ya(b,d));a&&(d=f.bboxLib.padRel(d,c.options("defaultSeries.shape.padding")||.05));var h=f.bboxLib.fromRect(b.contentRect);b=d[0];a=b+d[2];c=d[1];d=c+d[3];var e=a-b,g=d-c,k=e/h[2],l=g/h[3];
h=b+e/2;var m=c+g/2;k<l?(e*=l/k,b=[h-e/2,c,h+e/2,d]):(e=k/l*g,b=[b,m-e/2,a,m+e/2]);d=f.bboxLib.fromLTRB(b)}return d}var oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])},ka=function(){return{axes:"x,y",values:"map",requiredData:"",supportedData:"",privateAxes:"",customAxisOptions:{x:{visible:!1,type:"map"},y:{visible:!1,type:"map"}}}},za=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||
this;a.kind="map";a.typeConfig=ka();a.everVisibleCount=0;return a}na(a,b);a.prototype.getTypeConfigDefault=function(){return ka()};a.prototype.applyBoundsToAxes=function(a,d){var c=this.series,b=c.xAxis;c=c.yAxis;a[2]<d[2]&&(a[0]=d[0],a[2]=d[2]);a[3]<d[3]&&(a[1]=d[1],a[3]=d[3]);b.setMapRange([a[0],a[0]+a[2]],[d[0],d[0]+d[2]]);c.setMapRange([a[1],a[1]+a[3]],[d[1],d[1]+d[3]])};a.prototype.setCoordinates=function(a,d){pa(this,a,d);return this};a.prototype.possibleLabelPositions=function(a,d,b,e,g){if(this.altPossibleLabelPos)return this.altPossibleLabelPos(this,
a,d,b,e,g);g=this.series;b=e.meta;var c=a.getMapData();d=d||e.pathD||e.meta.bodyD;var h=f.bboxLib.fromRect(g.renderRect);g=this.xyzTranslator;var m=e.xyz;a=[];var v=b.labelSize;if(e.everVisible){var t=f.jL.evalPath(e.prevCoord,"meta.label"),q=e.shapeBounds;h=e.everVisible||(t?f.bboxLib.intersect([t,h]):!0);if((c=f.jL.evalPath(c,"properties.cent"))||!h)return[f.bboxLib.fromCenter(c?g(c):m,b.labelSize)];if(20>this.everVisibleCount)a:{if(q&&(e.fitBoxData||(d=f.pathLib.fromString(d),e.fitBoxData=f.polyFitLib.fitBoxData(d,
q)),e.fitBoxData)){e=f.polyFitLib.fitBoxInScanData(e.fitBoxData,q,v,c?g(c):m);break a}e=void 0}else e=f.bboxLib.fromCenter(f.bboxLib.center(q),b.labelSize);e&&a.push(e)}return a};a.prototype.getIconPaths=function(a,d){return f.getColumnIconPathsStatic(this,a,d)};a.prototype.render_applyDynamicAttrVals=function(a,d,h){a=b.prototype.render_applyDynamicAttrVals.call(this,a,d,h);delete a["fill-rule"];return a};a.prototype.getPointAnimatorOptions=function(a){return{simple:!0}};return a}(f.SeriesBaseType),
aa=function(b,a){for(var c=b[3]/2,d=b[2]/2,h,e,g,k,l=b[0],f=0;2>=f;l+=d,f++)for(var v=b[1],t=0;2>=t;v+=c,t++)if(0===f||2===f||0===t||2===t){var q=a(l,v);h=void 0!==h?Math.min(q[0],h):q[0];e=void 0!==e?Math.min(q[1],e):q[1];g=void 0!==g?Math.max(q[0],g):q[0];k=void 0!==k?Math.max(q[1],k):q[1]}return[h,e,g-h,k-e]},Aa=function(b){return b},ra=function(b){if(null==b)return Aa;var a,c,d=b.scale[0],h=b.scale[1],e=b.translate[0],g=b.translate[1];return function(b,l){l||(a=c=0);l=2;var k=b.length,f=Array(k);
f[0]=(a+=b[0])*d+e;for(f[1]=(c+=b[1])*h+g;l<k;)f[l]=b[l],++l;return f}},la=new ArrayBuffer(16);new Float64Array(la);new Uint32Array(la);var Y=function(b,a){return"GeometryCollection"===a.type?{type:"FeatureCollection",features:a.geometries.map(function(a){return ca(b,a)})}:ca(b,a)},y=f.en.error.mapping={noType:"The type member is missing.",wrongType:"The geoJSON type %% is not supported.",noCoordinates:"The object %% does not contain a coordinates member",noGeometry:"The object type %% requires a geometry member.",
noPropInType:"The object type %% requires a ## member.",notTopology:"The object is not topoJSON.",mapPathNotFound:"The map data path cannot be determined.",mapNotFound:'Error loading map data: "%%"',codeInvalid:"Regional code %% not recognized or invalid."},P=["map","mapDataId","map.id"],Q={Point:function(b,a,c,d){b=a.coordinates||a;return{data:b,bbox:f.bboxLib.bboxFromPoints([b]),type:"marker"}},Polygon:function(b,a,c,d){f.jL.def(a=a.coordinates)||b.error(y.noCoordinates,"Polygon");"number"===typeof a[0][0][0]&&
(a=a[0]);return{data:a,bbox:f.jL.evalPath(d,"properties.bbox")||f.bboxLib.bboxFromPoints(a)}},MultiPoint:function(b,a,c,d){d=[];var h=[];f.jL.def(a=a.coordinates)||b.error(y.noCoordinates,"MultiPoint");for(var e=0,g=a.length;e<g;e++)d[e]=Q.Point(b,a[e],c),h[e]=d[e].bbox;return{type:"marker",points:d,bbox:f.bboxLib.bboxUnion(h)}},LineString:function(b,a,c,d){d=[];var h=[];f.jL.def(a=a.coordinates)||b.error(y.noCoordinates,"LineString");for(var e=0,g=a.length;e<g;e++)d[e]=Q.Point(b,a[e],c),h[e]=d[e].bbox;
return{type:"line",points:d,bbox:f.bboxLib.bboxUnion(h)}},MultiLineString:function(b,a,c,d){d=[];var h,e=[];f.jL.def(h=a.coordinates)||b.error(y.noCoordinates,"MultiLineString");for(var g=0,k=h.length;g<k;g++){var l=h[g];a={};a.coordinates=l;d[g]=Q.LineString(b,a,c);e[g]=d[g].bbox}return{type:"line",points:d,bbox:f.bboxLib.bboxUnion(e)}},MultiPolygon:function(b,a,c,d){var h=[],e,g=[];f.jL.def(e=a.coordinates)||b.error(y.noCoordinates,"MultiPolygon");for(var k=0,l=e.length;k<l;k++){var m=e[k];a={};
a.coordinates=m[0];h[k]=Q.Polygon(b,a,c,d);g[k]=h[k].bbox}return{type:"polygon",points:h,bbox:f.jL.evalPath(d,"properties.bbox")||f.bboxLib.bboxUnion(g)}},GeometryCollection:function(b,a,c){a=a.geometries;for(var d=[],h=0,e=a.length;h<e;h++)d[h]=b.parseType(a[h],c);return d},Feature:function(b,a,c){var d;f.jL.def(d=a.geometry)||b.error(y.noPropInType,"Feature","geometry");f.jL.def(a.properties)||b.error(y.noPropInType,"Feature","properties");return b.parseType(d,c,a)},FeatureCollection:function(b,
a,c){c=c||{};var d=[],h,e=[],g=[],k=c.data,l=c.binding,m=c.mode,v=c.points||[];f.jL.def(a=a.features)||b.error(y.noPropInType,"FeatureCollection","features");if(l){var t=l.split(",");if(2===t.length){var q=t[0];var n=t[1]}}var B;if("makePoints"===m){m=0;for(t=a.length;m<t;m++){var G=a[m];d[m]=G.id?b.removePredef(v,G.id,c.cmi)||{}:{};d[m].map=G;f.jL.def(d[m].name)||f.jL.applySetting(d[m],G,"name","properties.name");if(h=f.jL.evalPath(d[m],"map.bbox")||f.jL.evalPath(d[m],"map.properties.bbox"))d[m].x=
[h[0],h[0]+h[2]],d[m].y=[h[1],h[3]+h[3]];b.setJscObjMapId(d[m],G.id,!0);h=G.properties;d[m].attributes=f.jL.fasterExtend(d[m].attributes||{},h);f.jL.def(d[m].attributes)||(d[m].attributes=h);if(l&&h&&k)for(var u=0,w=k.length;u<w;u++){var x=k[u];if(x[q]===h[n])for(var p in x)p!==q&&(d[m].attributes[p]=x[p])}h=b.parseType(G,c);f.jL.setPathVal(d[m],"map.bbox",h.bbox);if("marker"===h.type){var T=!0;d[m].x=h.data[0];d[m].y=h.data[1];g.push(h.data)}"line"===h.type&&(B=!0);0!==h.bbox[2]&&b.isIncludedInBBox(b.getJscObjMapId(c.series),
G.id)&&e.push(h.bbox)}g.length&&e.push(f.bboxLib.bboxFromPoints(g))}else for(m=0,t=a.length;m<t;m++)G=a[m],d[m]=b.parseType(G);d={points:d,bbox:f.bboxLib.bboxUnion(e)};B&&(d.type="line");T&&(d.type="marker");return d}},R=function(b){return b.getMapData?b.getMapData():b.mapData||b.map},Z=function(b,a){b.getMapData?b.setMapData(a):b.mapData=a},w,Ba=function(){function b(a){this.regionList=[];this.chart=a}b.prototype.error=function(a,c,d){var b=this.chart;b.error.addError(b.id,a,c,d)};b.prototype.parse=
function(a,c){return this.parseType(a,c,{})};b.prototype.parseType=function(a,c,d){var b,e;return f.jL.def(e=a.type)?(b=Q[e])?b(this,a,c,d):this.error(y.wrongType,e):this.error(y.noType)};b.prototype.toPath=function(a){var c=a.type;f.jL.def(a=a.geometry)||this.error(y.noPropInType,c,"geometry");c=a.type;f.jL.def(a=a.coordinates)||this.error(y.noCoordinates,c);return f.pathLib.fromPoints(a,{isOpen:"LineString"===c||"MultiLineString"===c})};b.prototype.flatten=function(a){return a&&a.join?a.join(" ").replace(/,/g,
" "):a};b.prototype.getBBoxOfPoints=function(a){for(var c=[],d,b,e,g=0,k=a.length;g<k;g++){var l=a[g],m=R(l);(d=m.bbox||f.jL.evalPath(m,"properties.bbox"))?d&&c.push(d):f.jL.def(b=l.x)&&f.jL.def(e=l.y)&&c.push([b,e,0,0])}return f.bboxLib.bboxUnion(c)};b.prototype.getSeriesBBox=function(a){var c=R(a),d=c?c.bbox:this.getBBoxOfPoints(a.points().items);if(d)return d;var b=[];if(c&&(f.jL.each(c.features,function(a){b.push(a.bbox)}),d=f.bboxLib.bboxUnion(b)))return d;d=a.indexer;var e=d.hasKey("xs")?["xs",
"xe"]:["x","x"],g=d.hasKey("ys")?["ys","ye"]:["y","y"];a=d.min(e[0]);c=d.min(g[0]);e=d.max(e[1]);d=d.max(g[1]);return[a,c,e-a,d-c]};b.prototype.getDataBBox=function(a){var c=[],d=this;a=a||this.chart.series();if(a.each&&a.items.length)return a.each(function(a){(a=d.getSeriesBBox(a))&&c.push(a)}),f.bboxLib.bboxUnion(c)};b.prototype.geoIterator=function(a,c){function d(a){for(var d=0,b=a.length;d<b;d++)c(a[d])}function b(a){for(var d=0,b=a.length;d<b;d++)c(a[d])}var e,g;f.jL.def(g=a.features)&&b(g);
f.jL.def(e=a.geometries)&&d(e)};b.prototype.polygonIterator=function(a,c){var d=a.type;a=a.coordinates;if("Polygon"===d)for(var b=0,e=a.length;b<e;b++){var g=a[b];var k=[];for(var f=0,m=g.length;f<m;f++)d=g[f],k.push(d);c(k.slice(0))}else if("MultiPolygon"===d){g=0;for(var v=a.length;g<v;g++){var t=a[g];b=0;for(e=t.length;b<e;b++){var q=t[b];k=[];f=0;for(m=q.length;f<m;f++)d=q[f],k.push(d);c(k.slice(0))}}}};b.prototype.arrToGeo=function(a){return{type:"FeatureCollection",features:a}};b.prototype.identifyCodeType=
function(a,c){function d(a){if(2===a.length&&1<a[0].length&&1<a[1].length)return!0}c=c||[];var b=a.length,e=[],g=a.toLowerCase();this.regionList.length||(this.regionList=f.jL.keys(f.jL.evalPath(w,"mapIndex")));var k=a.split(":");if(d(k))return d(k[0].split("."))?"mapPropertyFilter":"propertyFilter";if(k=-1<a.indexOf("."))e=a.split(".");else if(4===b&&2===a.indexOf("_s"))return"soloCountry";if("albersusa"===g)return"albersUSA";if("world"===g)return"region|-1";if(-1<g.indexOf(".json"))return"custom|-2";
if(3<a.length&&!k&&-1<f.jL.indexOfCaseInv(this.regionList,a))return"region|-1";if(2===a.length)return"hasc|0";if(4===a.length)return"fips|1";if(3<a.length&&k)return 2===e.length&&2!==e[0].length?(c.length&&-1<f.jL.indexOfCaseInv(c,e[0])||this.getGeoObject(e[0]),"customFeature|-3"):"fips|1";"custom"===a||this.getGeoObject(g);return"custom|-2"};b.prototype.getMapCodeToLoad=function(a){return a.split(".")[0]};b.prototype.findParentRegion=function(a){var c=f.jL.evalPath(w,"mapIndex"),d=this.identifyCodeType(a);
"albersUSA"===d?a="us":"soloCountry"===d&&(a=a.replace("_s",""));if(2===a.length)for(var b in c){if(c.hasOwnProperty(b)&&-1<c[b].Countries.indexOf(a.toUpperCase()))return b}else throw"cant find region of non-isoA2 code.";};b.prototype.countryCode=function(a){var c=this.identifyCodeType(a);if("hasc|0"===c)return a;if("fips|1"===c||"hasc|2"===c)return a.split(".")[0]};b.prototype.findCodeToLoadCountryFeature=function(a){return this.findParentRegion(a)};b.prototype.isIncludedInBBox=function(a,c){var d,
b=f.jL.evalPath(w,"mapIndex");a&&(d=this.identifyCodeType(a));var e;return"region|-1"===d&&(e=b[a.toLowerCase()].noBBox)&&-1<e.indexOf(c.toUpperCase())?!1:!0};b.prototype.addAliasedAttributes=function(a){var c=a.properties,d;if(d=a.id||c.hasc)if(a.id||(a.id=d),a=this.identifyCodeType(d),c.mapcode=d,"fips|1"===a){c.mapLevel="province";c.provincecode=c.statecode=c.postal;c.province=c.state=c.name;c.countrycode=c.hasc.split(".")[0];if(d=c.region)c.countryregion=d;a:{d=c.countrycode;d=d.toLowerCase();
(a=f.jL.evalPath(w,"master.objects.countries.geometries"))||(a=f.jL.evalPath(w,"maps."+d+"_s.objects.countries.geometries"));if(a)for(var b=0,e=a.length;b<e;b++){var g=a[b].properties;if(g.hasc.toLowerCase()===d){d=g;break a}}d=void 0}d&&(c.country=d.name,d.region&&(c.worldregion=d.region),d.continent&&(c.continent=d.continent))}else if("hasc|0"===a){if(c.mapLevel="country",c.countrycode=c.hasc,c.country=c.name,d=c.region)c.worldregion=d}else"region|-1"===a&&(c.mapLevel="region")};b.prototype.filenameWithoutExtension=
function(a){a=a.replace(/\\/g,"/").split("/");a=a[a.length-1].split(".");1<a.length&&a.pop();return a.join(".")};b.prototype.idfyPath=function(a){a=this.filenameWithoutExtension(a);-1<a.indexOf(".")&&(a=a.split(".")[0]);a=a.replace(/\\/g,"/").replace(/\//g,"_").replace(/\./g,"_");return a.toLowerCase()};b.prototype.genericFilter=function(a,c){c=c||{};var d=[],b=c.getProperties,e=c.conditions;f.jL.each(a,function(a,c){c=b?b(a):a;var g=!0,h=!1;if("function"===typeof e)var k=e(c);else{for(k in e)for(var f in c)if(f===
k)if(e[k]===c[f]){h=!0;break}else g=!1;k=h&&g?!0:void 0}k&&d.push(a)});return d};b.prototype.featureMatchesPropertyFilter=function(a,c){var d=this.identifyCodeType(a);var b=f.jL.evalPath(c,"properties")||c;if("propertyFilter"===d){a=a.split(":");a[1]=a[1].toLowerCase();d=a[0];if(f.jL.def(c=f.jL.evalPath(b,d))||f.jL.def(c=f.jL.evalPath(b,d.toLowerCase()))||f.jL.def(c=f.jL.evalPath(b,d.toUpperCase())))b:{b=typeof(c=c.valueOf());if("string"===b){if(c.toLowerCase()===a[1]){b=!0;break b}}else if(c===a[1].valueOf()){b=
!0;break b}b=void 0}else b=void 0;return b}if(a.toLowerCase()===c.id.toLowerCase())return!0};b.prototype.removePredef=function(a,c,d){c=c.toLowerCase();for(var b,e,g,k=0,f=a.length;k<f;k++)if(g=a[k],e=this.getJscObjMapId(g,-1))if(e===c||(b=this.findGeoFeature(e,d))&&b.id&&b.id.toLowerCase()===c.toLowerCase())return a.splice(k,1),g};b.prototype.findJsObjByMapCode=function(a){function c(a,c){if(b.getJscObjMapId(a).toLowerCase()===c.toLowerCase())return!0}function d(a){for(var d=e.series().items.slice(0),
b=0,g=d.length;b<g;b++){var k=d[b];if(c(k,a))return k;for(var f=0,h=k._points.length;f<h;f++){var l=k._points[f];if(c(l,a))return l}}}var b=this,e=b.chart,g;if(g=b.findGeoFeature(a,b.chart.internal.mappingInfo)){if(g.id)return d(g.id);if(g.features){a=[];for(var k=0,l=g.features.length;k<l;k++){var m=g.features[k];a.push(b.findJsObjByMapCode(m.id||f.jL.evalPath(m,"properties.hasc")))}return a}return d(a)}};b.prototype.getJscObjMapId=function(a,c){function d(a){return-1===c?a.toLowerCase():1===c?a.toUpperCase():
a}if(a=(a.currentOptions||a)[P[1]]||f.jL.evalPath(a,"userOptions."+P[1]))return d(a);var b=0;for(var e=P.length;b<e;b++)if("string"===typeof a)return b=this.identifyCodeType(a),"custom|-2"===b&&(a=this.idfyPath(a)),d(a)};b.prototype.setJscObjMapId=function(a,c,b){var d=a.userOptions||a;if(b&&d[P[1]])return d;d[P[1]]=c;a.key=c;return d};b.prototype.getDefinedDataBBox=function(a){var c=this,b,h=[],e,g,k=this.chart.ctManager;this.chart.series().each(function(a){c.getJscObjMapId(a,-1);k.isMapLayer(a);
if(!a.options("isBaseLayer"))if(e=c.getSeriesBBox(a))h.push(e);else{g=[];for(var b=0,d=a.userPoints.length;b<d;b++){var l=a.userPoints[b];(e=R(l).bbox)?h.push(e):g.push([l.x,l.y])}g.length&&h.push(f.bboxLib.bboxFromPoints(g))}});h.length&&(b=f.bboxLib.bboxUnion(h));return b};b.prototype.findTopoObjects=function(a,c){var b=this.identifyCodeType(c);c=c.toLowerCase();f.jL.def(a=a.objects)||this.error(y.noPropInType,"Topology","objects");var h=a;if("hasc|0"===b||"fips|1"===b)var e={conditions:function(a){var b;
if((b=a.id||a.properties.hasc)&&0===b.toLowerCase().indexOf(c))return!0}};else if("region|-1"===b){h={countries:a.countries};var g=f.jL.evalPath(w,"mapIndex."+c+".Countries");e=this.getOtherRegionCountries(c);g+=","+e.join(",");e={conditions:function(a){if(-1<g.indexOf("*")||-1<g.indexOf(a.id))return!0},getProperties:function(a){return{id:a.id}}}}b={objects:{}};for(var k in h){h={type:"GeometryCollection"};var l=this.genericFilter(a[k].geometries,e);if(l.length){h.geometries=l;var m=!0;b.objects[k]=
h}}return m?b.objects:null};b.prototype.findFeatureProps=function(a,b){var c=a;"string"!==typeof a&&(c=this.getJscObjMapId(a));if(c){a=this.identifyCodeType(c);var h,e;if("custom|-2"===a){if(e=this.findGeoFeature(c,b))return e.properties}else{if("soloCountry"===a){var g=f.jL.evalPath(w,"maps."+c.toLowerCase());c=c.replace("_s","")}else if("fips|1"===a&&(e=this.findGeoFeature(c))&&e.properties)return e.properties;g||(g=f.jL.evalPath(w,"master"));if(g){e=this.findTopoObjects(g,c);for(var k in e)for(b=
e[k].geometries,g=0,a=b.length;g<a;g++)if((h=b[g].id||f.jL.evalPath(b[g],"properties.hasc"))&&h.toLowerCase()===c.toLowerCase())return b[g].properties}}}};b.prototype.findGeoFeature=function(a,b){function c(a,b,c){var d=f.strLib.lowerFirst(b[0]);e.isSoloCountry(c);if(k=e.getGeoObject(a,c))if(l=f.jL.findPathInArrSimple(k.features,"properties."+d,b[1],!0,!0)||f.jL.findPathInArrSimple(k.features,"properties."+d,b[1].toUpperCase(),!0,!0)||f.jL.findPathInArrSimple(k.features,"properties."+d,b[1].toLowerCase(),
!0,!0)){if(l.pop){if(1===l.length)return l[0];l=e.arrToGeo(l)}return l}}function h(a){if(b)for(var c=b.allMaps,d=0,g=c.length;d<g;d++){var k=c[d];if("propertyFilter"!==e.identifyCodeType(k)&&a.replace("_s","").toLowerCase()===k.toLowerCase())return!0}else return!0}var e=this,g=e.identifyCodeType(a),k,l,m=a,v=a.split(".");if("fips|1"===g||"customFeature|-3"===g){m=a.split(".")[0];var t=m.toLowerCase();if(k=e.getGeoObject(t,b))m="customFeature|-3"===g?v[1]:a,(l=f.jL.findPathInArrSimple(k.features,"id",
m,!1,!0))?(l.length&&(l=l[0]),"customFeature|-3"!==g&&l.id&&-1===l.id.indexOf(v[0])&&(l.id=a)):w.errorLib.throwWarning("Map feature "+m+" was not found.");return l}if("hasc|0"===g){if(g=e.getRegionsFromCountries([a])[0],k=e.getGeoObject(g.toLowerCase(),b))return l=f.jL.findInArrSimple(k.features,"id",a.toUpperCase())||f.jL.findInArrSimple(k.features,"id",a.toLowerCase())}else if("custom|-2"===g){if(k=e.getGeoObject(a,b))return l=f.jL.findInArrSimple(k.features,"id",a)||f.jL.findInArrSimple(k.features,
"id",a.toUpperCase())||f.jL.findInArrSimple(k.features,"id",a.toLowerCase())}else{if("mapPropertyFilter"===g)return a=a.split(":"),g=a[0].split("."),c(g[0],[g[1],a[1]],b);if("propertyFilter"===g||"mapPropertyFilter"===g){a=a.split(":");for(var q in w.geo)if(h(q)&&(t=c(q,a,b)))return t}}};b.prototype.getGeoObject=function(a,b){b&&this.isSoloCountry(b)&&2===a.length&&-1===a.indexOf("_s")&&(a+="_s");return f.jL.evalPath(w,"geo."+a.toLowerCase())};b.prototype.setGeoObject=function(a,b){f.jL.setPathVal(w,
"geo."+a.toLowerCase(),b)};b.prototype.loadMaps=function(a,b,d,h,e){function c(a){var b=a.data,c=u.idfyPath(a.id);"Topology"===a.data.type?u.updateDataWithCustomTopo(a.data,a):f.jL.def(a.data.type)?u.setGeoObject(c,b):u.error(y.noPropInType,"map data","type");a.state=2;l()}function k(a){var b=u.identifyCodeType(a.id);"world"===a.id?u.updateMasterTopo(f.jL.evalPath(w,"maps."+a.id.toLowerCase().replace("albersusa","us")),a,"maps.masterWorld"):"soloCountry"!==b&&u.updateMasterTopo(f.jL.evalPath(w,"maps."+
a.id.toLowerCase().replace("albersusa","us")),a);a.state=2;l()}function l(){var a=!0;for(var b=[],c,e,g=d.chartMappingInfo,k=0,l=E.length;k<l;k++){e=E[k];c=-1<e.codeType.indexOf("ustom");if(2!==e.state&&(a=!1,!c))return;c||b.push(e.id)}if(b.length&&!J){c=0;for(e=b.length;c<e;c++)u.updateGeoFromMaster(b[c]);J=!0}if(a){g.mapsLoading=!1;G();a=g.loadedCallStack;if(a.length)for(b=0,c=a.length;b<c;b++)a[b].cb();g.loadedCallStack=[];h(f.jL.evalPath(w,"master"),K)}}function m(a){var b;if("soloCountry"!==
u.identifyCodeType(a)&&(b=u.findParentRegion(a))&&-1<f.jL.indexOfCaseInv(T,b))return!0}function v(a,b,c){a.replace("_s","");if(u.getGeoObject(a,c))return!0}function t(a){for(var b=0,c=z.mapsLoadingList;b<c.length;b++){var d=c[b];if(d&&d.fls.id.toLowerCase()===a.toLowerCase())return!0}}function q(){var a=z.mapsLoadingList;if(a.length){var b=a[0].fls.state;0!==b&&(a=a.shift(),b&&a.cb(),q())}}function n(a,b,c,d){var e=this,g=b+a;z.mapsLoadingList.push({fls:c,cb:function(){d(c)}});f.platform.getScript(g,
function(){c.state=1;q()},function(){e.error(y.mapNotFound,g||"");c.state=-1;q()})}function p(a,b,c,d){var e=b+a;z.mapsLoadingList.push({fls:c,cb:function(){d(c)}});f.platform.getJson(e,function(a){c.data=a.data;c.state=1;q()},function(a){u.error(y.mapNotFound,e||"");c.state=-1;q()})}function G(){var a=f.jL.evalPath(w,"geo"),b;for(b in a)u.geoIterator(a[b],function(a){u.addAliasedAttributes(a)})}d=d||{};var u=this,F=[],x=[],z=d.chartMappingInfo||{},T=z.regionList,r=!1,L=!1,E=[],J=!1;a=a||[];b=b||
[];if("string"===typeof a){a=a.split(",");for(var A=0,D=a.length;A<D;A++)a[A]=a[A].trim().toLowerCase()}if("string"===typeof b)for(b=b.split(","),A=0,D=b.length;A<D;A++)b[A]=b[A].trim().toLowerCase();a.length&&(z.internalMapsUsed=!0);var K=u.getSeriesPrototypeFromList(a,b,d);a.sort();a=f.jL.sortedUniq(a).slice(0);A=0;for(D=a.length;A<D;A++){var C=u.identifyCodeType(a[A]);"region|-1"===C?T.push(a[A]):"fips|1"===C?a[A]=a[A].split(".")[0]:"mapPropertyFilter"===C&&(a[A]=this.getMapCodeToLoad(a[A]))}var N=
u.isSoloCountry(z,a);if(b=(u.chart.userOptions.baseUrl||f.platform.getRootScriptPath())+"/"){b+="resources/maps/";var O=!0;f.jL.evalPath(w,"mapIndex")||F.push("Index");A=0;for(D=a.length;A<D;A++){var I=a[A];C=u.identifyCodeType(I);var M="custom|-2"===C?u.idfyPath(I):I;(M=v(M,N,z))||(O=!1);M||t(I)||("custom|-2"===C?(x.push(I),C={id:u.idfyPath(I),fn:I,state:0,codeType:C},E.push(C),z.customMapsUsed=!0,p(I,"",C,c),r=!0):(L=z.internalMapsUsed=!0,"hasc|0"===C||"soloCountry"===C||"albersUSA"===C?(M="Countries/",
M+=m(I)?I+"_c":I):M="fips|1"===C?"Countries/"+I.split(".")[0]:I,M=(M+".js").toLowerCase().replace("albersusa","us"),C={id:I,fn:M,state:0,codeType:C},E.push(C),F.push(M),n(M,b,C,k)))}if(r||L)z.mapsLoading=!0}else u.error(y.mapPathNotFound);r||L||!O?r||L||O||h(f.jL.evalPath(w,"master"),K):(0===a.length&&e&&e(),h(f.jL.evalPath(w,"master"),K));return K};b.prototype.getSeriesPrototypeFromList=function(a,b,d){function c(a){a&&(k.dataMaps.push(a),k.allMaps.push(a))}var e=this;d=d||{};var g=d.series||[],
k=d.chartMappingInfo||{},l,m,v,t,q,n,p=[];"string"===typeof a&&(a=a.split(","));var w=function(b){if("string"===typeof(l=f.jL.evalPath(b,"map"))){t=e.identifyCodeType(l);"mapPropertyFilter"===t?(e.setJscObjMapId(b,l),a.push(e.getMapCodeToLoad(l)),c(e.getMapCodeToLoad(l))):"propertyFilter"!==t&&a.push(l);if("custom|-2"===t)e.setJscObjMapId(b,l=e.idfyPath(l));else{if("region|-1"===t){var d=e.getOtherRegionCountries(l);a.push.apply(a,d)}e.setJscObjMapId(b,l)}c(l)}else b.type&&"map"!==b.type?c("custom"):
b.mapDataId&&c(b.mapDataId);if(n=b.points){d=0;for(var g=n.length;d<g;d++){var k=n[d];"string"===typeof(m=f.jL.evalPath(k,"map"))&&(y=e.identifyCodeType(m,a),v=m,"custom|-2"===y?(e.setJscObjMapId(k,e.idfyPath(m)),a.push(m)):"customFeature|-3"===y?e.setJscObjMapId(k,m):"region|-1"===y?e.error("Region points not supported."):"hasc|0"===y?(a.push(e.findCodeToLoadCountryFeature(m)),e.setJscObjMapId(k,m)):"fips|1"===y?(a.push(m.split(".")[0]),e.setJscObjMapId(k,m)):"propertyFilter"===y?e.setJscObjMapId(k,
m):"mapPropertyFilter"===y&&(e.setJscObjMapId(k,m),a.push(e.getMapCodeToLoad(m))),c(v))}}!b.isBaseLayer&&p.push(b)},u=this.isSoloCountry(k),F=[];k.dataMaps=[];k.allMaps=[];k.contextMaps="";for(var x=0,z=a.length;x<z;x++){var r=a[x];var y=this.identifyCodeType(r);"mapPropertyFilter"===y?(a[x]=this.getMapCodeToLoad(r),k.allMaps.push(a[x])):"propertyFilter"!==y?(q=this.removePredef(g,r,k))?c(r):(k.contextMaps=k.contextMaps||"",k.contextMaps+=","+r,k.allMaps.push(r)):F.push(x);r="custom|-2"===y?this.idfyPath(r):
r;r=this.setJscObjMapId(q||f.jL.fasterExtend({},{legendEntry:{visible:!1},type:"map",mouseTracking:!1,defaultPoint:{color:"#d3d3d3"},isBaseLayer:!0}),r);d.contextSeries&&f.jL.fasterExtend(r,d.contextSeries);r.type||(r.type="map");p.push(r)}x=0;for(z=F.length;x<z;x++)a.splice(F[x],1);x=0;for(z=b.length;x<z;x++)q=b[x],a.push(q),k.allMaps.push(q);x=0;for(z=g.length;x<z;x++)b=g[x],w(b);if(d=d.existingSeries?d.existingSeries.items?d.existingSeries.items:d.existingSeries:d.existingSeries){x=0;for(z=d.length;x<
z;x++)b=d[x],w(b);if((w=this.isSoloCountry(k))!==u)for(x=0,z=d.length;x<z;x++)b=d[x],u=R(b),"object"===typeof u&&w!==u.solo&&((u=this.getJscObjMapId(b))&&-1===a.indexOf(u)&&a.push(u),-1===p.indexOf(b)&&p.push(b))}return p};b.prototype.updateGeoFromMaster=function(a){var b=f.jL.evalPath(w,"master"),d=a.toLowerCase(),h=d.replace("_s","");if("soloCountry"===this.identifyCodeType(a)){var e=!0;b=f.jL.evalPath(w,"maps."+a.toLowerCase())}"world"===a&&(b=f.jL.evalPath(w,"maps.masterWorld"));if(a=this.findTopoObjects(b,
h))b=Y(b,a.provinces||a.countries),e&&(b.solo=!0),this.setGeoObject(d,b)};b.prototype.updateDataWithCustomTopo=function(a,b){var c;"Topology"!==a.type&&this.error(y.notTopology);f.jL.def(c=a.objects)||this.error(y.noPropInType,"Topology","objects");var h=[],e;for(e in c)h.push(Y(a,c[e]));this.setGeoObject(b.id,1<h.length?h:h[0])};b.prototype.populateSeriesWhenAble=function(a,b,d){function c(){var c,g=f.jL.evalPath(w,"master");f.jL.evalPath(w,"geo");var h,t;var q=b.dataMaps;var n=b.allMaps,p,r=0;for(h=
q.length;r<h;r++){var u=q[r];var y=k.identifyCodeType(u);"propertyFilter"===y&&(p=k.findGeoFeature(u,b))&&p.id&&(q[r]=p.id)}r=0;for(h=n.length;r<h;r++)u=n[r],y=k.identifyCodeType(u),"propertyFilter"===y&&(p=k.findGeoFeature(u,b))&&p.id&&(n[r]=p.id);k.isSoloCountry(b);n=0;for(p=a.length;n<p;n++)if(r=a[n],q=r.options("mapDataId"))if(h=k.identifyCodeType(q),u=q,"propertyFilter"===h||"mapPropertyFilter"===h)(c=k.findGeoFeature(q,b))&&e(r,c.pop?k.arrToGeo(c):c,q);else if("object"===typeof(c=R(r)))e(r,
c);else if(c=k.getGeoObject(u,b))e(r,c,q);else if(c=k.findTopoObjects(g,q))c=Y(g,c.provinces||c.countries),e(r,c,q);else throw"map was not found for series "+q;else if(h=r.userPoints){u=[];y=0;for(var x=h.length;y<x;y++){var z=h[y];if(t=k.getJscObjMapId(z))if(t=k.findGeoFeature(t,b))u.push(t),Z(z,t)}if(u.length||q)Z(r,{type:"FeatureCollection",id:q,features:u}),k.setJscObjMapId(r,q)}d(a)}function e(a,c,d){var e;a.userOptions.map=c;Z(a,c);!(e=c.properties)&&d&&(c=c.solo?d+"_s":d,e=k.findFeatureProps(c,
b));if(d){k.setJscObjMapId(a,d);var g=k.identifyCodeType(d)}e?a.userOptions.name=a.userOptions.name||e.name||"":"region|-1"===g?a.userOptions.name=a.userOptions.name||f.strLib.toTitleCase(d):"propertyFilter"===g&&(d=d.split(":"),a.userOptions.name=a.userOptions.name=f.strLib.toTitleCase(d[1]))}function g(a){var c=f.strLib.getRandomString();f.jL.findInArrSimple(b.loadedCallStack,"id",c)||b.loadedCallStack.push({id:c,cb:a})}var k=this;b.mapsLoading?g(c):c()};b.prototype.getRegionsFromCountries=function(a){for(var b=
f.jL.evalPath(w,"mapIndex"),d=[],h="",e=0,g=a.length;e<g;e++)for(var k in b)if(b.hasOwnProperty(k)&&-1<b[k].Countries.indexOf(a[e].toUpperCase())){-1===h.indexOf(k)&&(d.push(k),h+=k);break}return d};b.prototype.updateMasterTopo=function(a,b,d){d=d||"master";b=f.jL.evalPath(w,d);b||(b={type:"Topology",transform:a.transform,objects:{},arcs:[]},f.jL.setPathVal(w,d,b));d=b.arcs;b=b.objects;for(var c=0,e=0,g=a.arcs.length;e<g;e++){var k=a.arcs[e];"number"===typeof k?c+=k:(d[c]=k,c++)}for(var l in a.objects)b[l]?
Array.prototype.push.apply(b[l].geometries,a.objects[l].geometries):b[l]=a.objects[l]};b.prototype.isSoloCountry=function(a,b){var c,h=f.jL.evalPath(w,"solos");if(!1===a.projection)return!1;if(1===a.allMaps.length)"hasc|0"===this.identifyCodeType(a.allMaps[0],a)&&-1<h.indexOf(a.allMaps[0].toLowerCase())&&(c=!0);else for(var e=void 0,g=0,k=a.allMaps.length;g<k;g++){var l=this.identifyCodeType(a.allMaps[g]);var m=a.allMaps[g];"mapPropertyFilter"===l&&(m=this.getMapCodeToLoad(m));if(m=this.countryCode(m)){if(m=
m.toLowerCase(),-1<h.indexOf(m))if(!e)e=m,c=!0;else if(e!==m){c=!1;break}}else if("propertyFilter"!==l){c=!1;break}}if(c&&b)for(g=0,k=b.length;g<k;g++)e=b[g],a=this.identifyCodeType(e),"hasc|0"===a&&-1<h.indexOf(e.toLowerCase())&&(b[g]=e+"_s");return c};b.prototype.getOtherRegionCountries=function(a){var b=[],d;(d=f.jL.evalPath(w,"mapIndex."+a))&&d.noBBox&&f.jL.each(d.noBBox.split(","),function(a,c){-1===d.Countries.indexOf(a)&&b.push(a)});return b};return b}(),fa=function(){return{val2lin:function(b){return b},
lin2val:function(b){return b},val2linxy:function(b,a){return[b,a]},lin2valxy:function(b,a){return[b,a]},doPostTranslate:!1}},J=Math.PI,n=Math.cos,p=Math.sin,K=Math.tan,N=Math.atan,S=Math.abs,r=function(b,a){return Math.pow(0>b&&1>S(a%1)?S(b):b,a)},Ca=Math.atanh,Da=Math.sinh,D=Math.asin,Ea=Math.cosh,E=function(b){return b*J/180},U=function(b){return 180*b/J},ma=function(b,a,c,d){a=E(a);b=E(b);return[U(c(b,a)),U(d(b,a))]},O=function(b,a,c,d,f){return{type:b,val2linxy:function(b,d){return ma(b,d,a,c)},
lin2valxy:function(a,b){return ma(a,b,d,f)},doPostTranslate:!0}},W=function(b){return O("mercator",function(a,b){return a},function(a,b){return Math.log(S(K(J/4+b/2)))},function(a,b){return a},function(a,b){return 2*N(r(Math.E,b))-J/2})},Fa={none:fa,mercator:W,mercatortransverse:function(b){b=f.jL.map(b,E);var a=b[0],c=b[1];return O("mercatorTransverse",function(b,c){return Ca(n(c)*p(b-a))},function(b,f){return Math.atan2(K(f),n(b-a))-c},function(b,f){return a+N(Da(b)/n(f+c))},function(a,b){return D(p(b+
c)/Ea(a))})},lambertconformalconic:function(b,a){if(0===a[0]&&0===a[1])return W(b);b=f.jL.map(b,E);var c=b[0];b=b[1];a=f.jL.map(a,E);var d=Math.log(S(n(a[0])/n(a[1])))/Math.log(S(K(J/4+a[1]/2)/K(J/4+a[0]/2))),h=n(a[0])*r(K(J/4+a[0]/2),d)/d,e=h/r(K(J/4+b/2),d);return O("lambertConformalConic",function(a,b){return h/r(K(J/4+b/2),d)*p(d*(a-c))},function(a,b){return e-h/r(K(J/4+b/2),d)*n(d*(a-c))},function(a,b){return c+N(a/(e-b))/d},function(a,b){a=(0<d?1:0>d?-1:0)+Math.sqrt(r(a,2)+r(e-b,2));return 2*
N(r(h/a,1/d))-J/2})},lambertazimuthalequalarea:function(b,a){var c=E(b[0]),d=f.jL.map(a,E),h=function(a,b){return Math.sqrt(2/(1+p(d[0])*p(b)+n(d[0])*n(b)*n(a-c)))},e=function(a,b){return Math.sqrt(a*a+b*b)};return O("lambertAzimuthalEqualArea",function(a,b){return h(a,b)*n(b)*p(a-c)},function(a,b){return h(a,b)*(n(d[0])*p(b)-p(d[0])*n(b)*n(a-c))},function(a,b){return c+N(a*p(2*D(e(a,b)/2))/(e(a,b)*n(d[0])*n(2*D(e(a,b)/2))-b*p(d[0])*p(2*D(e(a,b)/2))))},function(a,b){return D(n(2*D(e(a,b)/2))*p(d[0])+
b*p(2*D(e(a,b)/2))*n(d[0])/e(a,b))})},stereographic:function(b,a){var c=E(b[0]),d=f.jL.map(a,E),h=function(a){return Math.sqrt((r(1*n(a),2)+r(.990025*p(a),2))/(r(1*n(a),2)+r(.995*p(a),2)))},e=function(a,b){return 2*h(b)/(1+p(d[0])*p(b)+n(d[0])*n(b)*n(a-c))},g=function(a,b){return 2*N(Math.sqrt(a*a+b*b)/(2*h(b)))};return O("stereographic",function(a,b){return e(a,b)*n(b)*p(a-c)},function(a,b){return e(a,b)*(n(d[0])*p(b)-p(d[0])*n(b)*n(a-c))},function(a,b){return c+N(a*p(g(a,b)/(Math.sqrt(a*a+b*b)*
n(d[0])*n(g(a,b)-b*p(d[0])*p(g(a,b))))))},function(a,b){return D(n(g(a,b))*p(d[0])+b*p(g(a,b))*n(d[0])/Math.sqrt(a*a+b*b))})},orthographic:function(b){b=f.jL.map(b,E);var a=b[0],c=b[1],d=function(a){return Math.sqrt((r(1*n(a),2)+r(.990025*p(a),2))/(r(1*n(a),2)+r(.995*p(a),2)))},h=function(a,b){return D(Math.min(Math.sqrt(a*a+b*b)/d(b),1))};return O("orthographic",function(b,c){return d(c)*n(c)*p(b-a)},function(b,g){return d(g)*(n(c)*p(g)-p(c)*n(g)*n(b-a))},function(b,d){return a+N(b*p(h(b,d))/(Math.sqrt(b*
b+d*d)*n(h(b,d))*n(c)-d*p(h(b,d))*p(c)))},function(a,b){return D(n(h(a,b))*p(c)+b*p(h(a,b))*n(c)/Math.sqrt(a*a+b*b))})}},ea=function(b,a,c){return(b=Fa[b.toLowerCase()])&&b(a,c)},ua=function(b){b.getConfig&&(b=b.getConfig());var a=b,c,d,h=function(a){return f.jL.isObject(a.map)?"loaded":a.mapDataId?"proto":a.map?"config":"none"};return"loaded"!==(c=h(b))&&"none"===c&&f.jL.find(a.points,function(a){return"none"!==(d=h(a))})?d:c},ya=function(b,a){return aa(a,function(a,d){return b.projection.val2linxy(a,
d)})};f.moduleLoader.registerModule("modules/maps",function(b,a){if(!b.isRendered&&b.optionsNormalized&&a.type&&f.jL.startsWith(a.type,"map")){b.geoParser=b.geoParser||new Ba(b);a=b.currentOptions;var c=b.options("mapping.base.layers");var d=b.options("mapping.referenceLayers");var h=b.options("mapping.base.series");c=b.geoParser.loadMaps(c,d,{contextSeries:h,series:a.series||[],chartMappingInfo:b.internal.mappingInfo},function(){b.mapsLoaded=!0});a.series=c;a=a.events=a.events||{};a.updateMapData=
a.updateMapData||function(a){return ta(a[0],a[1])};a.chartAreaRenderDataFirstTime=a.chartAreaRenderDataFirstTime||function(a){if(a.ctManager.isType("map")){var c=b.geoParser.getDefinedDataBBox(b.internal.mappingInfo),d=b.geoParser.getDataBBox();d&&c&&f.bboxLib.compareBoxes(c,d)&&ha(a,c);a.zoomBBoxInitial=V(b);a.zoomUpdated()}};a.setAxes=a.setAxes||function(a){return da(a)};a.preRenderData=a.preRenderData||function(a){var b=a[0];if(a[1]){var c=b.chart.geoParser.getDataBBox();X(b,c);if((a=b.contentRect&&
ja(b,!0))&&b.contentRect){var d=a;b.zoomAxes.length||b.setZoomAxes();var e=b.zoomAxes;e[0].setMapRange([c[0],c[0]+c[2]],[d[0],d[0]+d[2]]);e[1].setMapRange([c[1],c[1]+c[3]],[d[1],d[1]+d[3]]);e[0].setViewState(!0,!1);e[1].setViewState(!0,!1)}}else a=ja(b,!0),ia(b,a);va(b);a&&da(b,a)};a.pan=a.pan||function(a){var b=a[0],c=b.zoomBBox;c&&(a=f.bboxLib.translate(c,a[1]),b.zoomBBox=f.bboxLib.snapInside(a,b.zoomBBoxMax))};a.cazoom=a.cazoom||function(a){var b=a[0];b.zoomBBox=f.bboxLib.snapInside(a[1],b.zoomBBoxMax)};
b.zoom=function(a,c){b.action.log("zoom");wa(b.chartAreas(0),a,c)}}})&&f.registerSeriesType("map",za);(function(){!f.jL.evalPath(JSC,"internal._modules.maps.data")&&f.jL.setPathVal(JSC,"internal._modules.maps.data",{mapIndex:{europe:{Countries:"RU,AL,AX,AD,AT,BE,BG,BA,BY,CH,CZ,DE,DK,ES,EE,FI,FR,GB,GR,HR,HU,IM,IE,IS,IT,JE,XK,LI,LT,LU,LV,MC,MD,MK,MT,ME,PL,PT,RO,SM,RS,SK,SI,SE,UA,NL,NO",noBBox:"RU"},asia:{Countries:"AF,AE,AM,AZ,BD,BH,BN,BT,CN,CY,GE,HK,ID,IN,IR,IQ,IL,JO,JP,KZ,KG,KH,KR,KW,LA,LB,LK,MO,MM,MN,MY,NP,OM,PK,PH,KP,PS,QA,SA,SG,SY,TH,TJ,TM,TP,TR,TW,UZ,VN,YE",
noBBox:"RU,ID"},africa:{Countries:"AO,BI,BJ,BF,BW,CF,CI,CM,CD,CG,KM,CV,DJ,DZ,EG,ER,ET,GA,GH,GN,GM,GW,KE,LR,LY,LS,MA,MG,ML,MZ,MR,MW,NA,NE,NG,RW,EH,SD,SS,SN,SL,SO,ST,SZ,TD,TG,TN,TZ,UG,ZM,ZW,GQ,ZA",noBBox:"CV"},oceania:{Countries:"AU,FJ,GU,NU,NR,PG,SB,TO,VU,WS,NZ,NC",noBBox:"ID"},americas:{Countries:"AW,AI,AR,AG,BS,BZ,BM,BO,BR,BB,CA,CL,CO,CU,CW,KY,DM,DO,EC,GD,GL,GT,GY,HN,HT,JM,KN,LC,MF,MX,MS,NI,PA,PE,PR,PY,SV,PM,SR,SX,TC,TT,UY,US,VC,VE,VG,VI,CR"},world:{Countries:"*"}},maps:{},solos:"ru,aw,af,ao,ai,al,ax,ad,ae,ar,am,as,tf,ag,au,at,az,bi,be,bj,bf,bd,bg,bh,bs,ba,bl,by,bz,bm,bo,br,bb,bn,bt,bw,cf,ch,cl,cn,ci,cm,cd,cg,ck,co,km,cv,cu,cw,ky,cy,cz,de,dj,dm,dk,do,dz,ec,eg,er,es,ee,et,fi,fj,fk,fr,fo,fm,ga,gb,ge,gg,gh,gi,gn,gm,gw,gr,gd,gl,gt,gu,gy,hk,hm,hn,hr,ht,hu,id,im,in,io,ie,ir,iq,is,il,it,jm,je,jo,jp,kz,ke,kg,kh,ki,kn,kr,xk,kw,la,lb,lr,ly,lc,li,lk,ls,lt,lu,lv,mo,mf,ma,mc,md,mg,mv,mx,mh,mk,ml,mt,mm,me,mn,mp,mz,mr,ms,mu,mw,my,na,ne,nf,ng,ni,nu,np,nr,om,pk,pa,pn,pe,ph,pw,pg,pl,pr,kp,pt,py,ps,pf,qa,ro,rw,eh,sa,sd,ss,sn,sg,gs,sh,sb,sl,sv,sm,so,pm,rs,st,sr,sk,si,se,sz,sx,sc,sy,tc,td,tg,th,tj,tm,tp,to,tt,tn,tr,tv,tw,tz,ug,ua,um,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,ye,zm,zw,cr,gq,nz,nc,sq,yt,re,gp,gz,gf,bq,qo,mq,nl,bq,bq,za,no,us,ca",
geo:{}});!JSC.maps&&(JSC.maps=function(){return f.jL.evalPath(JSC,"internal._modules.maps.data.maps")});!w&&(w=f.jL.evalPath(JSC,"internal._modules.maps.data"))})()})(JSC.internal._modules.maps.externals);
